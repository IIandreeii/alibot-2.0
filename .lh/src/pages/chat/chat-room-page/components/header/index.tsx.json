{
    "sourceFile": "src/pages/chat/chat-room-page/components/header/index.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1740155583057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1740155651833,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n   ProfileWrapper,\n   Subtitle,\n } from \"./styles\";\n import AvatarCustom from \"../../../components/avatar\";\n-import { useChatContext } from \"pages/chat/context/chat\";\n+import { useChatContext } from \"../../../../../pages/chat/context/chat\";\n import { useNavigate, useParams } from \"react-router-dom\";\n import { useFirebase } from \"hooks/use-firebase\";\n import { Button } from \"../footer/styles\";\n import useIsDesktop from \"pages/chat/hooks/useWindowSize\";\n"
                },
                {
                    "date": 1740155656997,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n } from \"./styles\";\n import AvatarCustom from \"../../../components/avatar\";\n import { useChatContext } from \"../../../../../pages/chat/context/chat\";\n import { useNavigate, useParams } from \"react-router-dom\";\n-import { useFirebase } from \"hooks/use-firebase\";\n+import { useFirebase } from \"../../hooks/use-firebase\";\n import { Button } from \"../footer/styles\";\n import useIsDesktop from \"pages/chat/hooks/useWindowSize\";\n \n type HeaderProps = {\n"
                },
                {
                    "date": 1740155663645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n } from \"./styles\";\n import AvatarCustom from \"../../../components/avatar\";\n import { useChatContext } from \"../../../../../pages/chat/context/chat\";\n import { useNavigate, useParams } from \"react-router-dom\";\n-import { useFirebase } from \"../../hooks/use-firebase\";\n+import { useFirebase } from \"../../../../../hooks/use-firebase\";\n import { Button } from \"../footer/styles\";\n import useIsDesktop from \"pages/chat/hooks/useWindowSize\";\n \n type HeaderProps = {\n"
                },
                {
                    "date": 1740155670917,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n import { useChatContext } from \"../../../../../pages/chat/context/chat\";\n import { useNavigate, useParams } from \"react-router-dom\";\n import { useFirebase } from \"../../../../../hooks/use-firebase\";\n import { Button } from \"../footer/styles\";\n-import useIsDesktop from \"pages/chat/hooks/useWindowSize\";\n+import useIsDesktop from \"../../../../../pages/chat/hooks/useWindowSize\";\n \n type HeaderProps = {\n   inbox?: any;\n   onSearchClick: Function;\n"
                }
            ],
            "date": 1740155583057,
            "name": "Commit-0",
            "content": "import { useState, useRef, useEffect } from \"react\";\nimport Icon from \"../../../../../common/components/icons\";\nimport Picker, { EmojiClickData } from \"emoji-picker-react\";  \nimport {\n  Action,\n  Actions,\n  Container,\n  Name,\n  ProfileWrapper,\n  Subtitle,\n} from \"./styles\";\nimport AvatarCustom from \"../../../components/avatar\";\nimport { useChatContext } from \"pages/chat/context/chat\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useFirebase } from \"hooks/use-firebase\";\nimport { Button } from \"../footer/styles\";\nimport useIsDesktop from \"pages/chat/hooks/useWindowSize\";\n\ntype HeaderProps = {\n  inbox?: any;\n  onSearchClick: Function;\n  onProfileClick: Function;\n  title: string;\n  image: string;\n  subTitle: string;\n};\n\nexport default function Header(props: HeaderProps) {\n  \n  const { title, subTitle, image, onProfileClick, onSearchClick } = props;\n  const { getFromDatabase, updateDatabase, response } = useFirebase(); \n  const [editInfo, setEditInfo] = useState(false);\n  const [inputStr, setInputStr] = useState(\"\");\n  const [showPicker, setShowPicker] = useState(false);\n  const { chatSelected, numberSelected } = useChatContext();\n  const params = useParams();\n  const [nameUser, setNameUser] = useState(response?.name)\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    getFromDatabase(`${numberSelected}/${params.id}`);\n  }, [params.id]);\n\n  useEffect(() => {\n    if (editInfo && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [editInfo]);\n\n  const onEmojiClick = (emojiData: EmojiClickData) => {\n    setInputStr((prevInput) => prevInput + emojiData.emoji);\n    setShowPicker(false);\n\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  };\n\n  const onSendData = () => {\n    if (inputStr.trim()) {\n    \n      updateDatabase(`${numberSelected}/${params.id}`, { nickname: inputStr })\n        .then(() => {\n          console.log(\"Nombre actualizado con Ã©xito\");\n        })\n        .catch((error) => {\n          console.error(\"Error al actualizar el nombre:\", error);\n        });\n    }\n    setEditInfo(false);\n  };\n\n  useEffect(() => {\n    setNameUser(response?.nickname || response?.name || title)\n    setInputStr(response?.nickname || response?.name || title)\n  }, [response])\n  const navigate = useNavigate(); \n\n  const onCloseChat = () => {\n    navigate(\"/init\");\n  }\n  const isDesktop = useIsDesktop();\n\n  return (\n    <Container className={ isDesktop ? '' : 'fixed'}>\n      <AvatarCustom name={props.inbox?.name} />\n\n      <ProfileWrapper>\n        <Name>{nameUser}</Name>\n        {subTitle && <Subtitle>{subTitle}</Subtitle>}\n\n        <button onClick={() => setEditInfo(!editInfo)}>\n          <Icon id={editInfo ? \"cancel\" : \"edit\"} className=\"icon search-icon\" />\n        </button>\n\n        {editInfo && (\n          <div>\n            <input\n              type=\"text\"\n              ref={inputRef}\n              value={inputStr}\n              onChange={(e) => setInputStr(e.target.value)}\n            />\n            <button onClick={onSendData}>\n              <Icon id=\"check\" className=\"icon search-icon\" />\n            </button>\n\n            <button onClick={() => setShowPicker((val) => !val)}>\n              <Icon id=\"smiley\" className=\"icon search-icon\" />\n            </button>\n\n            {showPicker && <Picker onEmojiClick={onEmojiClick} />}\n          </div>\n        )}\n      </ProfileWrapper>\n      <Actions style={{marginRight: isDesktop ? '20px' : '10px'}}>\n        <Action onClick={onSearchClick}>\n          <Icon id=\"search\" className=\"icon search-icon\" />\n        </Action>\n        {\n          !isDesktop &&   <Action onClick={onCloseChat}>\n          <Icon id=\"cancel\" className=\"icon\" />\n        </Action>\n        }\n      \n      </Actions>\n    </Container>\n  );\n}\n"
        }
    ]
}