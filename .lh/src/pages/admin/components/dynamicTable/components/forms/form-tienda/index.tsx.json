{
    "sourceFile": "src/pages/admin/components/dynamicTable/components/forms/form-tienda/index.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1740153796513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1740153804167,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import { Controller, useForm } from 'react-hook-form';\n import { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\n import { Toast } from 'primereact/toast';\n import { RadioButton } from 'primereact/radiobutton';\n-import { useTemplate } from '../../../../services/template/template.service';\n+import { useTemplate } from '../../../../../../services/template/template.service';\n import { useSearchParams } from 'react-router-dom';\n import { v4 as uuidv4 } from 'uuid';\n import { useChatContext } from 'pages/chat/context/chat';\n import Cookies from 'js-cookie';\n"
                },
                {
                    "date": 1740153810003,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import { Controller, useForm } from 'react-hook-form';\n import { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\n import { Toast } from 'primereact/toast';\n import { RadioButton } from 'primereact/radiobutton';\n-import { useTemplate } from '../../../../../../services/template/template.service';\n+import { useTemplate } from 'services/template/template.service';\n import { useSearchParams } from 'react-router-dom';\n import { v4 as uuidv4 } from 'uuid';\n import { useChatContext } from 'pages/chat/context/chat';\n import Cookies from 'js-cookie';\n"
                },
                {
                    "date": 1740153852959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n import { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\n import { Toast } from 'primereact/toast';\n import { RadioButton } from 'primereact/radiobutton';\n import { useTemplate } from 'services/template/template.service';\n+import { useTemplate } from 'services/template/template.service';\n import { useSearchParams } from 'react-router-dom';\n import { v4 as uuidv4 } from 'uuid';\n import { useChatContext } from 'pages/chat/context/chat';\n import Cookies from 'js-cookie';\n"
                },
                {
                    "date": 1740153860560,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n import { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\n import { Toast } from 'primereact/toast';\n import { RadioButton } from 'primereact/radiobutton';\n import { useTemplate } from 'services/template/template.service';\n-import { useTemplate } from 'services/template/template.service';\n+import { useTemplate } from ';\n import { useSearchParams } from 'react-router-dom';\n import { v4 as uuidv4 } from 'uuid';\n import { useChatContext } from 'pages/chat/context/chat';\n import Cookies from 'js-cookie';\n"
                },
                {
                    "date": 1740153871230,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n import { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\n import { Toast } from 'primereact/toast';\n import { RadioButton } from 'primereact/radiobutton';\n import { useTemplate } from 'services/template/template.service';\n-import { useTemplate } from ';\n+import { useTemplate } from '../../../../../';\n import { useSearchParams } from 'react-router-dom';\n import { v4 as uuidv4 } from 'uuid';\n import { useChatContext } from 'pages/chat/context/chat';\n import Cookies from 'js-cookie';\n"
                },
                {
                    "date": 1740153879251,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n import { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\n import { Toast } from 'primereact/toast';\n import { RadioButton } from 'primereact/radiobutton';\n import { useTemplate } from 'services/template/template.service';\n-import { useTemplate } from '../../../../../';\n+import { useTemplate } from '../../../../../../../services/';\n import { useSearchParams } from 'react-router-dom';\n import { v4 as uuidv4 } from 'uuid';\n import { useChatContext } from 'pages/chat/context/chat';\n import Cookies from 'js-cookie';\n"
                },
                {
                    "date": 1740153889426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,10 +3,10 @@\n import { Controller, useForm } from 'react-hook-form';\n import { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\n import { Toast } from 'primereact/toast';\n import { RadioButton } from 'primereact/radiobutton';\n-import { useTemplate } from 'services/template/template.service';\n-import { useTemplate } from '../../../../../../../services/';\n+\n+import { useTemplate } from '../../../../../../../services/template/template.service';\n import { useSearchParams } from 'react-router-dom';\n import { v4 as uuidv4 } from 'uuid';\n import { useChatContext } from 'pages/chat/context/chat';\n import Cookies from 'js-cookie';\n"
                },
                {
                    "date": 1740153904791,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,13 +3,12 @@\n import { Controller, useForm } from 'react-hook-form';\n import { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\n import { Toast } from 'primereact/toast';\n import { RadioButton } from 'primereact/radiobutton';\n-\n import { useTemplate } from '../../../../../../../services/template/template.service';\n import { useSearchParams } from 'react-router-dom';\n import { v4 as uuidv4 } from 'uuid';\n-import { useChatContext } from 'pages/chat/context/chat';\n+import { useChatContext } from '../../../../../pages/chat/context/chat';\n import Cookies from 'js-cookie';\n \n interface FormData {\n   name: string;\n"
                },
                {
                    "date": 1740153941960,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,10 +5,10 @@\n import { Toast } from 'primereact/toast';\n import { RadioButton } from 'primereact/radiobutton';\n import { useTemplate } from '../../../../../../../services/template/template.service';\n import { useSearchParams } from 'react-router-dom';\n-import { v4 as uuidv4 } from 'uuid';\n-import { useChatContext } from '../../../../../pages/chat/context/chat';\n+\n+import { useChatContext } from '../../../../../../../pages/chat/context/chat';\n import Cookies from 'js-cookie';\n \n interface FormData {\n   name: string;\n"
                },
                {
                    "date": 1740153951924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n import { Toast } from 'primereact/toast';\n import { RadioButton } from 'primereact/radiobutton';\n import { useTemplate } from '../../../../../../../services/template/template.service';\n import { useSearchParams } from 'react-router-dom';\n-\n+import { v4 as uuidv4 } from 'uuid';\n import { useChatContext } from '../../../../../../../pages/chat/context/chat';\n import Cookies from 'js-cookie';\n \n interface FormData {\n"
                }
            ],
            "date": 1740153796513,
            "name": "Commit-0",
            "content": "import React, { useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { Controller, useForm } from 'react-hook-form';\nimport { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\nimport { Toast } from 'primereact/toast';\nimport { RadioButton } from 'primereact/radiobutton';\nimport { useTemplate } from '../../../../services/template/template.service';\nimport { useSearchParams } from 'react-router-dom';\nimport { v4 as uuidv4 } from 'uuid';\nimport { useChatContext } from 'pages/chat/context/chat';\nimport Cookies from 'js-cookie';\n\ninterface FormData {\n  name: string;\n  code: string;\n  userAlibot: string;\n  storeDomain: string;\n}\n\nconst FormContainer = styled.form`\n  width: 520px;\n  max-width: 520px;\n  margin: 5px auto;\n  padding: 0 30px;\n  margin-bottom: 40px;\n  border-radius: 10px;\n  background-color: #fff;\n  display: grid;\n  grid-template-columns: 1fr; /* Cambiado a una sola columna */\n  gap: 15px;\n  @media (max-width: 768px) {\n    width: 100%;\n    max-width: 100%;\n  }\n  h4 {\n    grid-column: span 1; /* Cambiado a una sola columna */\n    font-size: 22px;\n    color: #2c303c;\n    font-weight: 600;\n    text-align: center;\n    padding-bottom: 10px;\n    margin-bottom: 20px;\n    border-bottom: 1px solid #e0e0e0;\n    span {\n      color: #7c8c9c;\n    }\n  }\n  > div {\n    grid-column: span 1; /* Cambiado a una sola columna */\n    @media (max-width: 768px) {\n      grid-column: span 1 !important; /* Cambiado a una sola columna */\n    }\n  }\n`;\n\nconst InputContainer = styled.div`\n`;\n\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n  font-size: 16px;\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  font-size: 14px;\n\n  &:focus {\n    border-color: #007BFF;\n    outline: none;\n  }\n`;\n\nconst ErrorMessage = styled.p`\n  color: red;\n  font-size: 12px;\n`;\n\nconst SubmitButton = styled.button`\n  background-color: #2D2E83;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  padding: 10px 20px;\n  font-size: 16px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n\n  &:hover {\n    background-color: #3C58A4;\n  }\n\n  &:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n  }\n`;\n\nconst RadioGroup = styled.div`\n  display: flex;\n  gap: 10px;\n  margin-top: 10px;\n`;\n\ninterface Props {\n  closeModal: () => void;\n  setLoaderService: (data: boolean) => void;\n  dataEdit: any;\n  id?: string;\n  isDeletingUser: boolean;\n}\n\nconst radioOptions = [\n    { label: 'Generic', value: 'generic' },\n    { label: 'Agency', value: 'agency' },\n    { label: 'Cash on Delivery', value: 'cash_on_delivery' },\n];\n\nconst FormTienda: React.FC<Props> = ({\n  closeModal,\n  setLoaderService,\n  dataEdit,\n  id, \n  isDeletingUser,\n}) => {\n  const {\n    control,\n    trigger,\n    register,\n    handleSubmit,\n    setValue,\n    formState: { errors, isValid },\n  } = useForm<FormData>({ mode: 'onChange' });\n\n  const [isEditMode, setIsEditMode] = useState(false);\n  const toast = useRef<any>(null);\n  const { postStore, patchStore } = useTemplate();\n  const [searchParams] = useSearchParams();\n  const { setShowMessageDialog } = useChatContext();\n\n  useEffect(() => {\n    setShowMessageDialog(true)\n  }, [])\n  \n  const confirmCreateUser = (data: FormData) => {\n    \n    if (isDeletingUser) return;\n\n    confirmPopup({\n      className: \"toast_custom\", \n      appendTo: document.getElementById('submitButton') as HTMLElement,\n      message: dataEdit?.action === 'edit' ? '¿Estás seguro de editar la tienda?' : '¿Estás seguro de crear la tienda?',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => accept(data),\n      reject: closeModal,\n    });\n  };\n\n  const onSubmit = (data: FormData) => {\n    confirmCreateUser(data)\n  };\n\n  const accept = async (data: FormData) => {\n    setLoaderService(true);\n    const storedId = Cookies.get('authId');\n    \n    try {\n      if (dataEdit?.action === 'edit') {\n        await patchStore({ ...data }, Number(dataEdit?.data?.id));\n      } else {\n        await postStore({ ...data, phoneNumberId: Number(searchParams.get('id')), accountUserId: storedId });\n      }\n      closeModal();\n    } catch (error) {\n      toast.current.show({ severity: 'error', summary: 'Error', detail: 'Hubo un error', life: 3000 });\n    } finally {\n      setLoaderService(false);\n    }\n  };\n\n  useEffect(() => {\n    if (dataEdit?.action === 'edit') {\n      setIsEditMode(true);\n      setValue('name', dataEdit.data.name);\n      setValue('code', dataEdit.data.code);\n      setValue('userAlibot', dataEdit.data.userAlibot);\n      setValue('storeDomain', dataEdit.data.storeDomain);\n      trigger();\n    }\n  }, [searchParams, dataEdit, setValue, trigger]);\n\n  return (\n    <FormContainer onSubmit={handleSubmit(onSubmit)}>\n      <Toast ref={toast} />\n      <h4>{isEditMode ? 'Editar tienda' : 'Crear tienda'}</h4>\n\n      <InputContainer>\n        <Label htmlFor=\"name\">Nombre de tienda:</Label>\n        <Input id=\"name\" {...register('name', { required: 'Este campo es obligatorio' })} />\n        {errors.name && <ErrorMessage>{errors.name.message}</ErrorMessage>}\n      </InputContainer>\n\n      <InputContainer>\n        <Label htmlFor=\"userAlibot\">Usuario Alibot:</Label>\n        <Input id=\"userAlibot\" {...register('userAlibot', { required: 'Este campo es obligatorio' })} />\n        {errors.userAlibot && <ErrorMessage>{errors.userAlibot.message}</ErrorMessage>}\n      </InputContainer>\n      \n      <InputContainer>\n        <Label htmlFor=\"code\">Código de tienda:</Label>\n        <Input id=\"code\" {...register('code', { required: 'Este campo es obligatorio' })} />\n        {errors.code && <ErrorMessage>{errors.code.message}</ErrorMessage>}\n      </InputContainer>\n\n      <InputContainer>\n        <Label htmlFor=\"storeDomain\">Dominio Tienda Shopify:</Label>\n        <Input id=\"storeDomain\" {...register('storeDomain', { required: 'Este campo es obligatorio' })} />\n        {errors.storeDomain && <ErrorMessage>{errors.storeDomain.message}</ErrorMessage>}\n      </InputContainer>\n\n      <div id=\"submitButton\" style={{ position: 'relative'}}>\n        <SubmitButton type=\"submit\" disabled={!isValid}>\n          {isEditMode ? 'Guardar' : 'Crear tienda'}\n        </SubmitButton>\n      </div>\n\n    </FormContainer>\n  );\n};\n\nexport default FormTienda;\n"
        }
    ]
}